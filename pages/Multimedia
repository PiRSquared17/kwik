Instalar ffmpeg con soporte para AC3 y MP3.
 sudo wget http://www.medibuntu.org/sources.list.d/hardy.list -O /etc/apt/sources.list.d/medibuntu.list
 wget -q http://packages.medibuntu.org/medibuntu-key.gpg -O - | sudo apt-key add - && sudo apt-get update
 sudo apt-get install ffmpeg libavcodec1d libavformat1d libavutil1d

Las cámaras de vídeo actuales trabajan todas con formatos lossy. Un breve repaso a los formatos:
*El formato MPEG2 presente en los DVD y cámaras DVD/HDD, tiene una compresión ''interframe'', comprime fotogramas contiguos, de tal modo que no es adecuada para edición. Sí es adecuada para montaje, por cuanto se puede cortar y después concatenar. Dos o más clips MPEG de igual bitrate pueden unirse con ''car k1 k2 k3 > k4'' . Añade artifacts en la imagen. En 4,3 GiB pueden caber 120 minutos (30' - 1,4 GB).
*El formato DV ocupa bastante, pero por contra su compresión es ''intraframe'' (no inventa frames P y B). No requiere recompresión cuando editas y grabas. Tiene más calidad. En 1 GiB caben 4,62 minutos (1 hora - 13,5 GB).

== Conversión de formatos ==
*http://www.nerdlogger.com/2008/09/ffmpeg-command-line-quickies.html

=== 3gp ===
En 3GP se guarda el vídeo como MPEG-4 o H.263. El audio es almacenado en los formatos AMR-NB o AAC-LC.
Convertimos esos videos 3gp a un formato habitual (imagen MPEG1VIDEO y audio MP2):
 $ for i in *.3gp; do ffmpeg -i $i -ab 56 -ar 22050 -r 25 -b 500 ${i%.3gp}.mpg; done
Los mpg no permiten audio rate de 8000 ni 15 fps, así que hay que adaptarlo.
O los convertimos a DV para editarlos (este formato tiene una resolución fija de 768x480 y el sonido a 44100 Hz):
 $ for i in *.3gp; do ffmpeg -i $i -target pal-dv ${i%.3gp}.dv; done
=== flac ===
 flac -d kk.flac
=== flv ===
 ffmpeg -i amaranth.flv -ab 56 -ar 22050 -b 500 -s 320x240 /datos/kk.mpg
Los parámetros indicados son, por orden: fichero de entrada, audio bitrate, audio resampling frequency, video CBR, width x height y fichero de salida.

*http://gentoo-wiki.com/TIP_Converting_Audio_files_from_one_format_to_another

== Ripeo ==
=== mp3 ===
Tenemos el Sound Juicer y el ffmpeg. Para no andar instalando codecs mp3 (en caso de no poder usar codecs libres) ripeamos un CD audio a FLAC. Y luego este sencillo one-liner nos lo pasa a MP3 de 160 Kbps:
 $ for i in *.flac;do ffmpeg -i $i -acodec mp3 -ab 160 ${i%.flac}.mp3;done

=== DVD ===
Una vez tenemos el .VOB ripeado y descifrado el CSS, el archivo resultante .VOB es un MPEG-2 (concatenable mediante ''cat'' como todo MPEG). Lo codificamos a DivX:
 $ ffmpeg -i BotTBs.vob -deinterlace -vcodec msmpeg4v2 -b 4000k -acodec mp3 -ar 44100 -ab 128 Best_of_the_TB_series.divx.by_xeper.avi
Lo habitual es 2000k y 96kb de sonido.

Otra posibilidad es MPEG-4:
 $ ffmpeg -i kk.vob -s cif -f avi -vcodec mpeg4 -b 4000k -g 300 -bf 2 -acodec mp3 -ab 192 -mbd rd -flags +4mv+trell+aic -cmp 2 -subcmp 2 -vtag DIVX kk.avi

Crear DVDs con qdvdauthor y dvdstyler

=== Grabar mp3 en CD audio ===
 #! /bin/bash
 for file in *.mp3 ; do mpg123 --cdr - "$file" | cdrecord -v -nofix speed=8 dev=0,0,0 -audio - ; done
 cdrecord -v -fix speed=8 -eject dev=0,0,0

== Captura ==
=== Analógica ===
My problem consists in that to do video capture and preview it in realtime 
mode.

# Capure with transcode:
$ transcode -x v4l2,v4l2 -g 640x480 -i /dev/video0 -p /dev/dsp -y ffmpeg -F 
ffv1 -N 0x1 -o video_out.avi -m audio_out.pcm
$ mplayer -tv input=3:driver=v4l2 tv:// -vo x11 -vf pp=lb

and take an error:

v4l2: ioctl streamon failed: Device or resource busy
v4l2: 0 frames successfully processed, 0 frames dropped.

As I cannot get simultaneous access to /dev/video, so I has decided to make it 
through fifo:

$ mkfifo video.fifo
$ transcode -x v4l2,v4l2 -g 640x480 -i /dev/video0 -p /dev/dsp -y ffmpeg -F 
ffv1 -N 0x1 -o video.fifo -m audio_out.pcm
$ mplayer video.fifo -vo x11 -vf pp=lb
MPlayer 1.0rc2-4.1.2 (C) 2000-2007 MPlayer Team
CPU: Intel(R) Pentium(R) 4 CPU 3.00GHz (Family: 15, Model: 3, Stepping: 4)
MMX2 supported but disabled
CPUflags:  MMX: 1 MMX2: 0 3DNow: 0 3DNow2: 0 SSE: 1 SSE2: 1
Скомпилировано для определения типа процессора во время выполнения.
mplayer: could not connect to socket
mplayer: No such file or directory

Usually a sign you need a larger "-cache".

#!/bin/sh
rm -f /tmp/stream
mkfifo /tmp/stream
xine -G 352x288 -B --no-splash fifo:///tmp/stream &
ffmpeg -vd /dev/video -f video4linux -r 25 -s 352x288 -sameq -f mpeg -y /tmp/stream

Code:
#!/bin/sh
ffmpeg -vd /dev/video -f video4linux -r 25 -s 352x288 -sameq -f mpeg - | xine -G 352x288 -B --no-splash stdin:/

*http://www.murga-linux.com/puppy/viewtopic.php?p=188898&sid=6096e6d2efc17800483c14ab6e62bc7e
*http://www.mplayerhq.hu/DOCS/HTML/en/menc-feat-vcd-dvd.html

=== Digital (DV) ===
Captura de video DV a través del Firewire. Al conectar la videocámara se carga automáticamente el módulo raw1394 (dv1394).
Con estos programas, uno gráfico y otro CLI, podremos capturar.
 $ apt-get install kino dvgrab
Kino debe ejecutarse como root sudo kino para poder controlar la cámara.
*http://mercury.chem.pitt.edu/~sasha/LinuxFocus/Castellano/July2002/article254.shtml
*http://blogdrake.net/node/808

== Edición ==
Pasemos un tema de mp3 a wav para la edición en Kino:
 mpg123 -w kksk.wav /datos/Música/ALBUMS\ OLD/Jughead\'s\ Revenge\ -\ Pearly\ Gates/jugheads\ revenge\ -07-\ swell.mp3

Al exportar (Render, shift+R) es preferible usar un formato como Quicktime, DV (dv) o YUV2MPEG (mpg de toda la vida).
Si hacemos un mpg y queremos bajarle la calidad, empleamos ffmpeg:
 ffmpeg -i kk.mpg -an -s 160x120 -r 25 -b 200 skim.mpg #sin sonido, resolución CIF, 200 kbps, 25 fps

Si exportamos a DV y lo queremos subir a Youtube, es mejor cambiar la calidad:
 ffmpeg -i kk.dv -ab 128 -s 320x240 -r 25 -b 1000 skim.mpg

proyectos dv sólo a 720x576 a 44100 hz

=== Introducción a Cinelerra ===
Efectos:
ReframeRT: en Stretch mode, <1 slow motion y >1 fast motion.
Reverse: vídeo al revés
Flip: espejo
Scale: zoom fijo

Transiciones:
Dissolve: fundido
Flash: fogonazo blanco

Aplicar los efectos y renderizar el clip, antes de la transición. Sino, la transición se aplica sobre el clip sin efectos.

Una imagen se puede insertar como un fotograma o como un clip de vídeo de duración determinada. Ir a Settings->Record.

Activación de pistas.
Eliminación de huecos
Inserción

Renderizado de selección, marcas o proyecto.

Pan del sonido.

== Descargar flv de Internet ==
Los flv se cargan progresivamente por un programa swf de la página. Se descargan, lógicamente, desde el navegador cliente; es nuestro navegador quien pide la URL del flv. Con herramientas de análisis de tráfico de red (tcpdump, netstat) podría averiguarse la URI del flv. Pero mejor aún puede emplearse el panel Red de Firebug, que indica todas las conexiones que realiza la página actual.
Ahí podemos ver el flv correspondiente, copiar la dirección y descargarlo. Con suerte podremos navegar por el directorio y descargar más flv.